(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67ff1ffc"],{"0063":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(t,e,s){this.width=0,this.height=0,this.context=t,this.width=e,this.height=s}draw(){this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.width,this.height)}}},"16c2":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("p",{class:["message__p",t.styleState]},[t._v(t._s(t.message))])])},h=[],r=s("9ab4"),o=s("60a3");let n=class extends o["c"]{get styleState(){let t="message--primary";return this.state&&("error"===this.state&&(t="message--error"),"over"===this.state&&(t="message--over")),t}};Object(r["a"])([Object(o["b"])()],n.prototype,"message",void 0),Object(r["a"])([Object(o["b"])()],n.prototype,"state",void 0),n=Object(r["a"])([o["a"]],n);var a=n,c=a,u=s("2877"),d=Object(u["a"])(c,i,h,!1,null,null,null);e["a"]=d.exports},"50aa":function(t,e,s){"use strict";var i,h,r,o,n,a,c,u,d,l,g;s.d(e,"h",(function(){return i})),s.d(e,"j",(function(){return h})),s.d(e,"g",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"d",(function(){return n})),s.d(e,"a",(function(){return a})),s.d(e,"c",(function(){return c})),s.d(e,"f",(function(){return u})),s.d(e,"e",(function(){return d})),s.d(e,"i",(function(){return l})),s.d(e,"k",(function(){return g})),function(t){t[t["LEFT"]=37]="LEFT",t[t["RIGHT"]=39]="RIGHT",t[t["UP"]=38]="UP",t[t["DOWN"]=40]="DOWN"}(i||(i={})),function(t){t[t["START"]=0]="START",t[t["PLAY"]=1]="PLAY",t[t["OVER"]=2]="OVER"}(h||(h={})),function(t){t[t["RESTART"]=82]="RESTART",t[t["Q"]=81]="Q",t[t["W"]=87]="W",t[t["SPACE"]=32]="SPACE"}(r||(r={})),function(t){t[t["WIDTH"]=800]="WIDTH",t[t["HEIGHT"]=400]="HEIGHT"}(o||(o={})),function(t){t[t["WIDTH"]=640]="WIDTH",t[t["HEIGHT"]=640]="HEIGHT",t[t["SCALE_COEFFICIENT"]=20]="SCALE_COEFFICIENT"}(n||(n={})),function(t){t[t["WIDTH"]=800]="WIDTH",t[t["HEIGHT"]=720]="HEIGHT"}(a||(a={})),function(t){t[t["WIDTH"]=800]="WIDTH",t[t["HEIGHT"]=600]="HEIGHT"}(c||(c={})),function(t){t[t["WIDTH"]=450]="WIDTH",t[t["HEIGHT"]=450]="HEIGHT"}(u||(u={})),function(t){t[t["WIDTH"]=320]="WIDTH",t[t["HEIGHT"]=540]="HEIGHT",t[t["SCALE_COEFFICIENT"]=20]="SCALE_COEFFICIENT"}(d||(d={})),function(t){t[t["FIRST"]=0]="FIRST",t[t["SECOND"]=1]="SECOND",t[t["AI"]=2]="AI"}(l||(l={})),function(t){t[t["SLOW"]=8]="SLOW",t[t["MIDDLE"]=14]="MIDDLE",t[t["FAST"]=20]="FAST"}(g||(g={}))},"6c3f":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"snake"},[s("Scores",{attrs:{scores:t.getScores}}),s("canvas",{ref:"game"}),t.isMessage?s("Message",{attrs:{message:t.getMessage,state:t.getStyleOfMessage}}):t._e(),s("button",{staticClass:"btn-outline btn-outline--restart",attrs:{type:"button"},on:{click:function(e){return t.restart()}}},[t._v("Restart")])],1)},h=[],r=s("9ab4"),o=s("65d9"),n=s.n(o),a=s("50aa"),c=s("b8e3");class u extends c["a"]{constructor(t,e){super(t,e)}}u.size=20;var d=s("fe79");class l extends d["a"]{constructor(t,e,s,i,h){super(t,e,s,i),this.context=h}draw(){this.context.fillStyle="#acc38b",this.context.beginPath(),this.context.fillRect(this.x,this.y,this.width,this.width),this.context.closePath()}relocation(t,e){const s=Math.floor(Math.random()*t+1)*this.width,i=Math.floor(Math.random()*e+1)*this.width;this.setPos(s,i)}}var g=s("0063");class f{constructor(t,e,s){this.body=[],this.headX=0,this.headY=0,this.velocity=4,this.headX=t,this.headY=e,this.context=s,this.body.push(new u(this.headX,this.headY))}draw(){this.context.fillStyle="#114444";for(const t of this.body)this.context.fillRect(t.x,t.y,u.size,u.size)}cut(){this.body.pop()}add(){const t=new u(this.headX,this.headY);this.body.unshift(t)}turnTo(t){t===a["h"].RIGHT&&(this.headX+=this.velocity),t===a["h"].LEFT&&(this.headX-=this.velocity),t===a["h"].UP&&(this.headY-=this.velocity),t===a["h"].DOWN&&(this.headY+=this.velocity)}reset(){this.headX=220,this.headY=220,this.velocity=4,this.body=[]}get x(){return this.headX}get y(){return this.headY}get getBody(){return this.body}get getVelocity(){return this.velocity}}var v=s("b049"),p=s("7cc2"),b=s("16c2"),y=s("b6ab");let T=class extends(Object(o["mixins"])(p["a"])){constructor(){super(),this.currentDirection=a["h"].RIGHT,this.placeFoodX=0,this.placeFoodY=0,this.loop=0,this.scores=[],this.score=new v["a"]}run(){!1!==this._initInstance()&&this.start()}update(){this.board.draw(),this.snake.draw(),this.food.draw(),this._checkState(),this._move()}start(){this.update(),this.isOver||(this.loop=requestAnimationFrame(this.start))}stop(){this.loop&&(cancelAnimationFrame(this.loop),this.globalState=a["j"].OVER,this.canvas.removeEventListener("keydown",this.keyListener))}restart(){this._reset(),this.run()}mounted(){this.run()}get getScores(){return this.scores=[{message:"Previous score",value:this.previousScore},{message:"Current score",value:this.currentScore},{message:"Best result",value:this.bestScore}],this.scores}get previousScore(){return this.score.getPreviousScore}get currentScore(){return this.score.getScore}get bestScore(){return this.score.getBest}_reset(){this.stop(),this.score.reset(),this.snake.reset()}_initInstance(){if(!1===this.isInitCanvas&&!1===this._initCanvas(a["c"].WIDTH,a["c"].HEIGHT))return!1;this.keyListener=t=>{this._handleKey(t)},this.canvas.addEventListener("keydown",this.keyListener),this.globalState=a["j"].PLAY;const t=300,e=260;return this.snake=new f(t,e,this.context),this.board=new g["a"](this.context,this.width,this.height),this.placeFoodX=this.width/u.size-1,this.placeFoodY=this.height/u.size-1,this.food=new l(0,0,u.size,u.size,this.context),this._putNewFood(),!0}_putNewFood(){this.food.relocation(this.placeFoodX,this.placeFoodY)}_gameOver(){this.globalState=a["j"].OVER,this._setMessage("The game is over","over")}_checkCollisionBorder(){return this.snake.x<0||this.snake.x+u.size>this.width||(this.snake.y<0||this.snake.y+u.size>this.height)}_checkCollisionBody(){if(1===this.snake.getBody.length)return!1;for(const t of this.snake.getBody)if(this.snake.x===t.x&&this.snake.y===t.y)return!0;return!1}_move(){this.snake.turnTo(this.currentDirection)}_checkState(){(this._checkCollisionBorder()||this._checkCollisionBody())&&this._gameOver(),this.snake.x<this.food.x+this.food.getWidth&&this.snake.x+this.snake.getVelocity>this.food.x-this.food.getWidth&&this.snake.y<this.food.y+this.food.getHeight&&this.snake.y+this.snake.getVelocity>this.food.y-this.food.getHeight&&(this.score.increase(1),this.snake.add(),this._putNewFood()),this.snake.cut(),this.snake.add()}_handleKey(t){t.keyCode===a["g"].RESTART&&(this.globalState=a["j"].OVER,this.restart()),t.keyCode===a["h"].LEFT&&this.currentDirection!==a["h"].RIGHT&&(this.currentDirection=a["h"].LEFT),t.keyCode===a["h"].RIGHT&&this.currentDirection!==a["h"].LEFT&&(this.currentDirection=a["h"].RIGHT),t.keyCode===a["h"].DOWN&&this.currentDirection!==a["h"].UP&&(this.currentDirection=a["h"].DOWN),t.keyCode===a["h"].UP&&this.currentDirection!==a["h"].DOWN&&(this.currentDirection=a["h"].UP)}};T=Object(r["a"])([n()({components:{Message:b["a"],Scores:y["a"]}})],T);var E=T,S=E,I=s("2877"),_=Object(I["a"])(S,i,h,!1,null,null,null);e["default"]=_.exports},"7cc2":function(t,e,s){"use strict";var i=s("9ab4"),h=s("60a3"),r=s("50aa");class o{constructor(t,e,s){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=s,this.canvas.setAttribute("tabindex","1"),this.canvas.focus()}addEventListener(t,e){this.canvas.addEventListener(t,e)}removeEventListener(t,e){this.canvas.removeEventListener(t,e)}get context(){return this.ctx}}let n=class extends h["c"]{constructor(){super(...arguments),this.canvas=null,this.width=0,this.height=0,this.globalState=r["j"].START,this.isInitCanvas=!1,this.message="",this.styleOfMessage=""}_initCanvas(t,e){return!!this.$refs.game&&(this.width=t,this.height=e,this.canvas=new o(this.$refs.game,t,e),this.context=this.canvas.context,this.isInitCanvas=!0,!0)}clearContext(){this.isInitCanvas&&(this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore())}get isOver(){return this.globalState===r["j"].OVER}get getMessage(){return this.message}get getStyleOfMessage(){return this.styleOfMessage}get isMessage(){return this.isOver&&""!==this.message}_resetMessage(){this.message="",this.styleOfMessage=""}_setMessage(t,e){this.message=t,this.styleOfMessage=e}};n=Object(i["a"])([h["a"]],n);e["a"]=n},b049:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(){this.previousScore=0,this.score=0,this.best=0}increase(t){t=Math.abs(t),this.score+=t,this._updatePreviousScore(),this._updateBest()}decrease(t){t<0&&(t=Math.abs(t)),this.score-t<0||(this.score-=t,this._updatePreviousScore())}reset(){this.score=0}get getScore(){return this.score}get getPreviousScore(){return this.previousScore}get getBest(){return this.best}_updatePreviousScore(){this.previousScore=this.score}_updateBest(){this.score>this.best&&(this.best=this.score)}}},b6ab:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scores"},t._l(t.scores,(function(e,i){return s("p",{key:i,staticClass:"scores__p",class:t.colors[i]},[t._v("\n    "+t._s(e.message)+" - "+t._s(e.value)+"\n  ")])})),0)},h=[],r=s("9ab4"),o=s("60a3");let n=class extends o["c"]{constructor(){super(...arguments),this.colors=["scores--color-scarlet","scores--color-turquoise","scores--color-light-blue"]}};Object(r["a"])([Object(o["b"])({default:[]})],n.prototype,"scores",void 0),n=Object(r["a"])([o["a"]],n);var a=n,c=a,u=s("2877"),d=Object(u["a"])(c,i,h,!1,null,null,null);e["a"]=d.exports},b8e3:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(t,e){this.posX=0,this.posY=0,this.posX=t,this.posY=e}setPos(t,e){this.posX=t,this.posY=e}get x(){return this.posX}set x(t){this.posX=t}get y(){return this.posY}set y(t){this.posY=t}}},fe79:function(t,e,s){"use strict";s.d(e,"a",(function(){return h}));var i=s("b8e3");class h extends i["a"]{constructor(t,e,s,i){super(t,e),this.width=0,this.height=0,this.width=s,this.height=i}get getWidth(){return this.width}set setWidth(t){this.width=t}get getHeight(){return this.height}set setHeight(t){this.height=t}}}}]);
//# sourceMappingURL=chunk-67ff1ffc.972afeec.js.map